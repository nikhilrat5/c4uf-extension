using com.sap.mdm.bp.BPKeyMappingModel as BPKeyMappingModel from './BPKeyMappingModel';

service MD_BP_KEY_MAPPING {

  @Capabilities : {
    Insertable : false,
    Updatable  : false,
    Deletable  : false
  }
  entity BusinessSystem                 as projection on BPKeyMappingModel.BusinessSystem;

  @Capabilities : {
    Insertable : false,
    Updatable  : false,
    Deletable  : false
  }
  entity MultipleAssignmentBPKeyMapping as projection on BPKeyMappingModel.MultipleAssignmentBPKeyMapping;

  @Capabilities : {
    Insertable : false,
    Updatable  : false,
    Deletable  : false
  }
  view BusinessPartnerKeyMapping as
    select from BPKeyMappingModel.BusinessPartnerKeyMapping {
      Id,
      BusinessSystemId_Id,
      BusinessPartnerId,
      BusinessPartner,
      BusinessPartnerExternalId,
      KeymappingGroupID,
      to_BusinessSystem.BusinessSystem      as BusinessSystem,
      to_BPCustomerMapping,
      to_BPSupplierMapping,
      to_BusinessPartner.AuthorizationGroup as AuthorizationGroup

    }
    where
      (
        (
             isMarkedForDeletion != true
          or isMarkedForDeletion is null
        )
        and (
             IsActive != false
          or IsActive is null
        )
      );

  @sap.searchable : 'true'
  @Capabilities   : {
    Insertable : false,
    Updatable  : false,
    Deletable  : false
  }
  entity BPToMultipleAssignmentMapping  as projection on BPKeyMappingModel.BPToMultipleAssignmentMapping {
    * , to_BusinessSystem.BusinessSystem as BusinessSystem
  };

};
