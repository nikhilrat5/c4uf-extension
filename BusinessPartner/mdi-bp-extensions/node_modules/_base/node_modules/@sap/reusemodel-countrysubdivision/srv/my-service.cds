namespace cds.foundation.sap.countrysubdivision;

using from '../db/data-model';

using cds.foundation.sap.language.C_LanguageValueHelp as C_LanguageValueHelp from '@sap/reusemodel-language';
@BusConfign.ConfignPattern : 'Country Service'
@BusConfign.ConfignPattern.Version : '1.0.0'
@BusConfign.ConfignPattern.Description : 'Country Code List Service'
@BusConfign.Confign.Version : '1.0.0'
service Service{
    @BusConfign.Entity  : 'Countries'
    @BusConfign.Entity.Required
    @BusConfign.Entity.CsvPath : 'Countries.csv'
    entity Countries as projection on countrysubdivision.C_Countries{
		CountryTwoLetterISOCode,  
		CountryThreeLetterISOCode,
		CountryThreeDigitISOCode,
		BusConfignVersion,
		text : redirected to CountryTexts,
		subdivision : redirected to Subdivisions,
		localised : redirected to CountryTexts
	} excluding {
		text,
		localised,
		subdivision
	};
	
	entity CountriesValueHelp  @readonly as projection on countrysubdivision.C_CountryValueHelp{
		key CountryTwoLetterISOCode,
		CountryThreeLetterISOCode,
		CountryThreeDigitISOCode,
		key LanguageTwoLetterISOCode,
		CountryISOShortName,
		CountryISOFullName
	};
	
	entity CountriesValueHelp3Letter  @readonly as projection on countrysubdivision.C_CountryValueHelp{
		key CountryTwoLetterISOCode,
		key CountryThreeLetterISOCode,
		CountryThreeDigitISOCode,
		key LanguageTwoLetterISOCode,
		CountryISOShortName,
		CountryISOFullName
	};
	
	entity CountriesValueHelp3Digit  @readonly as projection on countrysubdivision.C_CountryValueHelp{
		key CountryTwoLetterISOCode,
		CountryThreeLetterISOCode,
		key CountryThreeDigitISOCode,
		key LanguageTwoLetterISOCode,
		CountryISOShortName,
		CountryISOFullName
	};
	
	entity SubdivisionsValueHelp  @readonly as projection on countrysubdivision.C_SubdivisionValueHelp{
		key CountryTwoLetterISOCode,
		key CountrySubdivision,
		CountrySubdivisionType,
		CountrySubdivisionRegionaldivision,
		CountrySubdivisionRomanizationSystem,
		key CountrySubdivisionTextLanguageCode,
		CountrySubdivisionName
	};
	
	entity SubdivisionsValueHelpType  @readonly as projection on countrysubdivision.C_SubdivisionValueHelp{
		key CountryTwoLetterISOCode,
		key CountrySubdivision,
		key CountrySubdivisionType,
		CountrySubdivisionRegionaldivision,
		CountrySubdivisionRomanizationSystem,
		key CountrySubdivisionTextLanguageCode,
		CountrySubdivisionName
	};
	
	entity SubdivisionsValueHelpRD  @readonly as projection on countrysubdivision.C_SubdivisionValueHelp{
		key CountryTwoLetterISOCode,
		key CountrySubdivision,
		CountrySubdivisionType,
		key CountrySubdivisionRegionaldivision,
		CountrySubdivisionRomanizationSystem,
		key CountrySubdivisionTextLanguageCode,
		CountrySubdivisionName
	};
	entity SubdivisionsValueHelpRS  @readonly as projection on countrysubdivision.C_SubdivisionValueHelp{
		key CountryTwoLetterISOCode,
		key CountrySubdivision,
		CountrySubdivisionType,
		CountrySubdivisionRegionaldivision,
		key CountrySubdivisionRomanizationSystem,
		key CountrySubdivisionTextLanguageCode,
		CountrySubdivisionName
	};
	
	@BusConfign.Entity  : 'CountryTexts'
	@BusConfign.Entity.Required
	@BusConfign.Entity.Dependency : ['Countries']
	@BusConfign.Entity.CsvPath : 'CountriesText.csv'
	entity CountryTexts as projection on countrysubdivision.C_CountryTexts {
 		*
	} ;
	@BusConfign.Entity  : 'Subdivisions'
	@BusConfign.Entity.Required
	@BusConfign.Entity.Dependency : ['Countries']
	@BusConfign.Entity.CsvPath : 'Subdivisions.csv'
	entity Subdivisions as projection on countrysubdivision.C_Subdivisions {
  		*,
  		localisedSubdivision: redirected to SubdivisionTexts,
  		subdivisionText
	} excluding {
		localisedSubdivision,
		subdivisionText
	};
	@BusConfign.Entity  : 'SubdivisionTexts'
	@BusConfign.Entity.Required
	@BusConfign.Entity.Dependency : ['Subdivisions']
	@BusConfign.Entity.CsvPath : 'SubdivisionsText.csv'
	entity SubdivisionTexts as projection on countrysubdivision.C_SubdivisionTexts {
  		*
	};
	entity CountriesWithTexts as projection on countrysubdivision.C_CountriesWithTexts {*};
	entity SubdivisionsWithTexts as projection on countrysubdivision.C_SubdivisionsWithTexts {*};
	entity CountriesAndSubdivisionsWithTexts as projection on countrysubdivision.C_CountriesAndSubdivisionsWithTexts {*};
	
	entity LanguageCodesValueHelp @readonly as projection on C_LanguageValueHelp{
		key LanguageTwoLetterISOCode,
		LanguageName
	};
	
	action activateConfiguration(BusConfignVersion:Integer64) returns String;
}
