namespace cds.foundation.sap.language;

using cds.foundation.sap.language.LanguageTwoLetterISOCode from './types';
using cds.foundation.sap.language.LanguageTextLanguageCode from './types';
using cds.foundation.sap.language.LanguageName from './types';
using cds.foundation.sap.busconfign.BusinessConfiguration as BusinessConfiguration from '@sap/BusinessConfigurationModel';

entity Languages: BusinessConfiguration { 
	key LanguageTwoLetterISOCode: LanguageTwoLetterISOCode;  
	text: Association to many LanguageTexts on text.LanguageTwoLetterISOCode = LanguageTwoLetterISOCode and text.BusConfignVersion = BusConfignVersion;
	localised: association[1] to LanguageTexts on localised.LanguageTwoLetterISOCode=LanguageTwoLetterISOCode and localised.BusConfignVersion=BusConfignVersion and localised.LanguageTextLanguageCode=SUBSTRING(SESSION_CONTEXT('LOCALE'),1,2);

};

entity LanguageTexts: BusinessConfiguration { 
	key LanguageTwoLetterISOCode: LanguageTwoLetterISOCode not null;  
	key LanguageTextLanguageCode : LanguageTextLanguageCode not null;
	LanguageName: LanguageName;
};

entity I_Languages as select from Languages{ 
   *
}excluding{BusConfignIsDeleted};

entity I_LanguageTexts as select from LanguageTexts{ 
   *
}excluding{BusConfignIsDeleted};

entity I_LanguagesWithTexts as select from Languages{ 
    key LanguageTwoLetterISOCode,
    key COALESCE(text.LanguageTextLanguageCode, '') as LanguageTextLanguageCode : LanguageTextLanguageCode,
    text.LanguageName,
    key BusConfignVersion
};

entity I_LanguageValueHelp as select from Languages{
 	key LanguageTwoLetterISOCode,
    key COALESCE(localised.LanguageTextLanguageCode, '') as LanguageTextLanguageCode : LanguageTextLanguageCode,
    localised.LanguageName,
    key BusConfignVersion
};

entity C_Languages as select from I_Languages{*};
entity C_LanguageTexts as select from I_LanguageTexts{*};
entity C_LanguagesWithTexts as select from I_LanguagesWithTexts {*};
entity C_LanguageValueHelp as select from I_LanguageValueHelp {*};
