namespace mdo;

using mdo.ObjectTypeOwner as ObjectTypeOwner from '../db/ObjectTypeOwnerModel';
using cds.foundation.sap.businessobjecttype.ObjectType as ObjectType from '@sap/reusemodel-businessobjecttype/db/BusinessObjectTypeModel';
using mdo.ApplicationDestination as ApplicationDestination from '../db/ApplicationDestination';
using mdo.BusinessObjectType as BusinessObjectType from '../db/ObjectTypeOwnerModel';

service manageObjectTypeOwners {
		
		@Capabilities.SearchRestrictions.Searchable: true
		@Capabilities: { Insertable:true, Updatable:true, Deletable:true }
		entity ObjectTypeOwners as projection on ObjectTypeOwner{
			*,
			To_BusinessObjectType: redirected to ObjectTypes
		}excluding {
			To_BusinessObjectType
		};
		
		@Capabilities: { Insertable:false, Updatable:false, Deletable:false }
    	view ObjectTypes as select from ObjectType {
			key objectTypeCode,
			key BusConfignVersion,
			businessObject,
			isProjection,
			mainObject,		
			description[language=SUBSTRING(SESSION_CONTEXT('LOCALE'),1,2)].description as localizedDescription
  	    } where mainObject is null or mainObject = '';
  	
		@Capabilities: { Insertable:false, Updatable:false, Deletable:false }
		entity ConsumerDestinations as projection on ApplicationDestination {
	        *
	    } excluding {
	   		To_Consumers
		};
		
		@Capabilities: { Insertable:false, Updatable:false, Deletable:false }
		entity BusinessObjectTypes as projection on BusinessObjectType;  	

};
