namespace mdo;

annotate mdo.locateObject.OverviewKeyMappingDistributionStatus with {

	ObjectInstanceKey 
	@Common: {
		Label: '{i18n>ObjectInstanceKey}',
		//FieldControl: #Hidden,
		ValueList: {
			CollectionPath: 'OverviewKeyMappingDistributionStatus',
			Parameters: [
				{$Type: 'Common.ValueListParameterInOut', LocalDataProperty: 'ObjectInstanceKey', ValueListProperty: 'ObjectInstanceKey'}
			]
		}
	};
	
	ProviderDestination
	@Common: {
		Label: '{i18n>locateObjectProviderDestination}',
		FieldControl: #Mandatory,
//		SearchRestrictions.Searchable,
		ValueListWithFixedValues: true,
		ValueList: {
			SearchSupported: true,
			CollectionPath: 'ProviderDestinationVH',
			Parameters: [
				{$Type: 'Common.ValueListParameterInOut', LocalDataProperty: 'ProviderDestination', ValueListProperty: 'Destination'}
			]
		}
	};
	
	BusinessSystem 
	@Common: {
		Label: '{i18n>businessSystem}'
	};
	
	ObjectId 
	@Common: {
		Label: '{i18n>objectId}'
	};
	
	ObjectTypeCode 
	@Common: {
		Label: '{i18n>objectTypeCode}',
		Text: {$value: ObjectTypeCodeText, ![@UI.TextArrangement]: #TextFirst},
		FieldControl: #Mandatory,
		ValueListWithFixedValues: true,
		ValueList: {
			CollectionPath: 'BusinessObjectTypeVH',
			Parameters: [
				{$Type: 'Common.ValueListParameterInOut', LocalDataProperty: 'ObjectTypeCode', ValueListProperty: 'objectTypeCode'}
			]
		}
		
	};
	
	ObjectTypeCodeText
	@Common: {
		Label: '{i18n>objectTypeCode}',
		FieldControl: #Hidden,
		ValueListWithFixedValues: true,
		ValueList: {
			CollectionPath: 'BusinessObjectTypeVH',
			Parameters: [
				{$Type: 'Common.ValueListParameterInOut', LocalDataProperty: 'ObjectTypeCodeText', ValueListProperty: 'localizedDescription'}
			]
		}
		
	};
	
	MappingGroupId 
	@Common: {
		Label: '{i18n>MappingGroupId}'
	};
	
	Counter 
	@Common: {
		Label: '{i18n>Counter}'
	};
};

annotate mdo.locateObject.BusinessObjectTypeVH with {
	
	ObjectTypeCode 
	@Common: {
		Label: '{i18n>objectTypeCode}',
		FieldControl: #Hidden
	};

	BusConfignVersion
	@Common: {
		Label: '{i18n>objectTypeCode}',
		FieldControl: #Hidden
	};
	
	LocalizedDescription
	@Common: {
		Label: '{i18n>objectTypeCode}',
		FieldControl: #Hidden
	};
}; 


annotate mdo.locateObject.BusinessObjectTypeVH with @(
	UI: {
		LineItem: [ 
			{$Type: 'UI.DataField', Value: objectTypeCode, ![@UI.Importance]: #Medium},
			{$Type: 'UI.DataField', Value: localizedDescription, ![@UI.Importance]: #High}
		]
	}
){
	BusConfignVersion @(
		UI.HiddenFilter: true
	);
	
	objectTypeCode @(
		UI.HiddenFilter: true,
		Common: {
			Label: '{i18n>objectTypeCode}',
			Text: localizedDescription
		}
	);
};


annotate mdo.locateObject.DetailKeyMappingDistributionStatus with {

	ObjectInstanceKey 
	@Common: {
		Label: '{i18n>ObjectInstanceKey}',
		FieldControl: #Hidden
	};
	
	ObjectId 
	@Common: {
		Label: '{i18n>ObjectId}',
		FieldControl: #Mandatory
	};
	
	ObjectTypeCode 
	@Common: {
		Label: '{i18n>objectTypeCode}',
		FieldControl: #Hidden
	};
	
	MappingGroupId 
	@Common: {
		Label: '{i18n>mappingGroupId}',
		FieldControl: #Hidden
		
	};
	
	ReplicationStatus 
	@Common: {
		Label: '{i18n>distributionStatus}',
		FieldControl: #Mandatory
	};
	
	LastExecutiontime 
	@Common: {
		Label: '{i18n>lastExecutiontime}',
		FieldControl: #Mandatory
	};	
	
	NextExecutionTime 
	@Common: {
		Label: '{i18n>nextExecutiontime}',
		FieldControl: #Mandatory
	};
	
	ObjectTypeCodeText
	@Common: {
		FieldControl: #Hidden
	};
	
	ObjectIdentifierType
	@Common: {
		FieldControl: #Hidden
	};

	StatusColor
	@Common: {
		FieldControl: #Hidden
	};
	
	BusinessSystem 
	@Common: {
		Label: '{i18n>businessSystem}',
		FieldControl: #Mandatory
	};	
	
	ObjectIdentifierTypeText
	@Common: {
		FieldControl: #Hidden
	};
};

annotate mdo.locateObject.DistributionStatusSummaries with {
	ObjectInstanceKey 
	@Common: {
		Label: '{i18n>ObjectInstanceKey}',
		FieldControl: #Mandatory
	};
	
	ReplicationStatus 
	@Common: {
		Label: '{i18n>ReplicationStatus}',
		FieldControl: #Mandatory
	};
	
	Destination 
	@Common: {
		Label: '{i18n>businessSystem}',
		FieldControl: #Mandatory
	};
	
	Counter 
	@Common: {
		Label: '{i18n>Counter}',
		FieldControl: #Mandatory
	};
};

annotate mdo.locateObject.DistributionStatusSummaries with @(
	UI: {
		Chart: {
			ChartType: #BarStacked,
			Measures: [Counter],
			MeasureAttributes: [
				{
					Measure: Counter,
					Role: #Axis1,
					DataPoint: '@UI.DataPoint#DistributionStatusDataPoint'
				}
			],
			Dimensions: [ReplicationStatus],
			DimensionAttributes: [
				{
					Dimension: ReplicationStatus, 
					Role: #Category
				}
			]
		},
		
		DataPoint#DistributionStatusDataPoint: {
			Value: Counter,
			Criticality: StatusColor 
		}
	}
);

annotate mdo.locateObject.OverviewKeyMappingDistributionStatus with @(

	Common: {
		SemanticKey: [ObjectId],
		FilterExpressionRestrictions: [{
			Property: ProviderDestination,
			AllowedExpressions: #SingleValue,
		},
		{
			Property: ObjectTypeCode,
			AllowedExpressions: #SingleValue,
		}]
	},
	
	UI: {
		HeaderInfo: {
			TypeName: '{i18n>locateObject}',
			TypeNamePlural: '{i18n>locateObjectPlural}',
			Title: {Value: ObjectId},
			Description: {Value: ObjectTypeCode, Label:ObjectTypeCodeText}
		},
		PresentationVariant: {
			GroupBy: ['ObjectInstanceKey']
		},
		
		HeaderFacets: [
			{$Type: 'UI.ReferenceFacet', Target: '@UI.FieldGroup#ReplicationStatus', Label: '{i18n>Replication}'}
		],
		
		SelectionFields: [ObjectTypeCode, ProviderDestination, ObjectId],
		LineItem: [
			{$Type: 'UI.DataField', Value: ObjectId, Label: '{i18n>objectId}', ![@UI.Importance]: #High},
			{$Type: 'UI.DataField', Value: ObjectInstanceKey, Label: '{i18n>ObjectInstanceKey}', ![@UI.Importance]: #High},
			{$Type: 'UI.DataField', Value: ObjectTypeCode, Label: '{i18n>objectTypeCode}', ![@UI.Importance]: #High},
			{$Type: 'UI.DataField', Value: ProviderDestination, Label: '{i18n>locateObjectProviderDestination}', ![@UI.Importance]: #High},
			{$Type: 'UI.DataFieldForAnnotation', Target: 'to_DistributionStatusSummary/@UI.Chart', Label: '{i18n>distributionStatus}', ![@UI.Importance]: #High},
			{$Type: 'UI.DataField', Value: Counter, Label: '{i18n>Counter}', ![@UI.Importance]: #Medium},
			{$Type: 'UI.DataFieldForIntentBasedNavigation', Label: '{i18n>monitorOrchestration}', SemanticObject: 'DistributionGraph', Action: 'Display', RequiresContext: 'true'},
		],

		Facets: [
			{$Type: 'UI.ReferenceFacet', Label: '{i18n>locateObjectPlural}', Target: 'to_GroupMember/@UI.LineItem'}
		]
		
	}
);

annotate mdo.locateObject.DetailKeyMappingDistributionStatus with @(
	Common.SemanticKey: [MappingGroupId,ObjectId,BusinessSystem],
	
	UI: {
		HeaderInfo: {
			TypeName: '{i18n>GroupedObjectIdsHeaderInfo}',
			Description: {$value: localizedDescription, ![@UI.TextArrangement]: #TextFirst}
		},
		HiddenFilter : MappingGroupId,
		LineItem: [
			{$Type: 'UI.DataField', Value: ObjectId, Label: '{i18n>objectId}', ![@UI.Importance]: #High},
			{$Type: 'UI.DataField', Value: BusinessSystem, Label: '{i18n>businessSystem}', ![@UI.Importance]: #High},
			{$Type: 'UI.DataField', Value: Destination, Label: '{i18n>destination_LO}', ![@UI.Importance]: #High},
			{$Type: 'UI.DataField', Value: ReplicationStatus, Label: '{i18n>distributionStatus}', ![@UI.Importance]: #Medium, Criticality: StatusColor},
			{$Type: 'UI.DataField', Value: LastExecutiontime, Label: '{i18n>lastExecutiontime}', ![@UI.Importance]: #Medium},
			{$Type: 'UI.DataField', Value: NextExecutionTime, Label: '{i18n>nextExecutiontime}', ![@UI.Importance]: #Medium},
			{$Type: 'UI.DataFieldForIntentBasedNavigation', Label: '{i18n>distributionStatusNavBtn}', SemanticObject: 'DistributionStatus', Action: 'Display', RequiresContext: 'true'},
			{$Type: 'UI.DataFieldForIntentBasedNavigation', Label: '{i18n>monitorOrchestration}', SemanticObject: 'DistributionGraph', Action: 'Display', RequiresContext: 'true'}
		]
		
		}
);
