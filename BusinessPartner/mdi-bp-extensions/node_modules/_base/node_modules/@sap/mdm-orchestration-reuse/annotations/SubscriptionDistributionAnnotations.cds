using mdo.manageDistributions from '../srv/manageDistributions';

annotate manageDistributions.SubscriptionDistributions with  {
	Model
	@Common: {
		Label: '{i18n>model}',
		Text: To_LocalizedDescription.Description,
		FieldControl: #Mandatory
	};

	IsActive 
	@Common: {
		Label: '{i18n>isActive}',
		FieldControl: #ReadOnly
	};

	CallType 
	@Common: {
		Label: '{i18n>callType}',
		FieldControl: #Mandatory
	};

	Frequency
	@Common: {
		Label: '{i18n>frequency}',
		FieldControl: #Hidden
	};
	
	PackageSize
	@Common: {
		Label:'{i18n>packageSize}',
		FieldControl: #Mandatory
	};

	ValidityStartDate
	@Common: {
		Label: '{i18n>validityStartDate}',
		FieldControl: #Hidden
	};

	ValidityEndDate
	@Common: {
		Label: '{i18n>validityEndDate}',
		FieldControl: #Hidden
	};

	Id
	@Common: {
		Label:'{i18n>id}',
		FieldControl: #Hidden
	};

	ProviderApplicationAPIVersion
	@Common.FieldControl: #Hidden;

	KeyMappingWriteIsAllowed 
	@Common: {
		Label: '{i18n>keyMappingWriteIsAllowed}',
		FieldControl: #Hidden
	};

	KeyMappingUseIsAllowed 
	@Common: {
		Label: '{i18n>keyMappingUseIsAllowed}',
		FieldControl: #Hidden
	};

	KeyMappingDistributionIsAllowed
	@Common.Label: '{i18n>keyMappingDistributionIsAllowed}';

	IsMarkedForDeletion
	@Common.Label: '{i18n>isMarkedForDeletion}';

//	ProviderApplicationType
//	@Common.Label: '{i18n>providerApplicationType}';

//	ProviderApplicationTypeVersion
//	@Common.Label: '{i18n>providerApplicationTypeVersion}';

	IsLocalModel
	@Common.Label: '{i18n>isLocalModel}';

	BusinessObjectType
	@Common: {
		Label: '{i18n>objectTypeCode}',
		Text: {$value: BusinessObjectType.localizedDescription, ![@UI.TextArrangement]: #TextFirst},
//		FieldControl: #ReadOnly,
		FieldControl: #Mandatory,
		ValueListWithFixedValues: true,
		ValueList: {
			CollectionPath: 'ObjectTypes',
			Parameters: [
				{$Type: 'Common.ValueListParameterInOut', LocalDataProperty: 'BusinessObjectType_BusConfignVersion', ValueListProperty: 'BusConfigVersion'},
				{$Type: 'Common.ValueListParameterInOut', LocalDataProperty: 'BusinessObjectType_objectTypeCode', ValueListProperty: 'objectTypeCode'}
			]
		}
	};

	ProviderApplicationAPI
	@Common.Label: '{i18n>api}';

	CreatedByUser
	@Common.Label: '{i18n>createdby}';

	CreationDate
	@Common.Label: '{i18n>createdon}';

	IsActivable
	@Common: {
		Label: '{i18n>isActivable}',
		FieldControl: #Hidden
	};

	IsDeactivable
	@Common: {
		Label: '{i18n>isDeactivable}',
		FieldControl: #Hidden
	};

	IsDeletable
	@Common: {
		Label: '{i18n>isDeletable}',
		FieldControl: #Hidden
	};

	IsEditable
	@Common: {
		Label: '{i18n>isEditable}',
		FieldControl: #Hidden
	};

	LastActivatedAt
	@Common.Label: '{i18n>lastActivatedOn}';

	LastActivatedBy
	@Common.Label: '{i18n>lastActivatedBy}';

	LastChangeDate
	@Common.Label: '{i18n>lastChangedOn}';

	LastChangedByUser
	@Common.Label: '{i18n>lastChangedBy}';

	To_API
	@Common: {
		FieldControl: #Hidden
	};

	IsGeneratedByDPP
	@UI.Hidden: true
};

annotate manageDistributions.SubscriptionDistributions with @(
	Common: {
		Label: '{i18n>subscriptionDistribution}',
		SemanticKey: [Id],
		SideEffects#onChangedAPI: {
			SourceProperties: [ProviderApplicationAPI,ProviderApplicationAPIVersion],
			TargetEntities: [To_API.To_DependentObjectAPI],
			EffectTypes: #ValueChange
		},
		SideEffects#onChangedBOT: {
			SourceProperties: [BusinessObjectType_objectTypeCode],
			TargetEntities: [BusinessObjectType],
			EffectTypes: #ValueChange
		}
	},
	
	Capabilities.FilterRestrictions.NonFilterableProperties: [To_API, To_LocalizedDescription, DraftAdministrativeData, BusinessObjectType, BusinessObjectType_BusConfignVersion],
	
	UI: {
		HeaderInfo: {
			TypeName: '{i18n>TITLE}',
			TypeNamePlural: '{i18n>TITLE_PLURAL}',
			Title: {Value: Model, Label: '{i18n>model}'},
			Description: {Value: To_LocalizedDescription.Description}
		},

		HeaderFacets: [
			{$Type: 'UI.ReferenceFacet', Target: '@UI.FieldGroup#generalInformation', Label: '{i18n>generalInfo}'},
			{$Type: 'UI.ReferenceFacet', Target: '@UI.FieldGroup#scheduleInformation', Label: '{i18n>scheduleInfo}'},
			{$Type: 'UI.ReferenceFacet', Target: '@UI.FieldGroup#admin', Label: '{i18n>admin}'},
			{$Type: 'UI.ReferenceFacet', Target: '@UI.DataPoint#KPIDataPoint'}
		],
		DataPoint#KPIDataPoint: {
			Title: '{i18n>statusLabel}',
			Value: IsActive,
			Criticality: '@UI.CriticalityType/Neutral'
		},
		PresentationVariant: {
			RequestAtLeast: ['Frequency']
		},

		SelectionFields: ['Model', 'BusinessObjectType_objectTypeCode', 'ProviderApplicationAPI'],
		HiddenFilter : Id,
		LineItem: [
			{$Type: 'UI.DataField', Value: Model, Label:'{i18n>model}', ![@UI.Importance]: #Medium},
			{$Type: 'UI.DataField', Value: IsActive, Label:'{i18n>isActive}', ![@UI.Importance]: #Medium},
			{$Type: 'UI.DataField', Value: BusinessObjectType_objectTypeCode, Label:'{i18n>objectTypeCode}', ![@UI.Importance]: #Medium},
			{$Type: 'UI.DataField', Value: ProviderApplicationAPI, Label:'{i18n>api}', ![@UI.Importance]: #Medium},
			{$Type: 'UI.DataField', Value: CallType, Label:'{i18n>callType}', ![@UI.Importance]: #Medium},
			{$Type: 'UI.DataField', Value: Recurrence, Label:'{i18n>frequency}', ![@UI.Importance]: #Medium}
		],

		Facets: [
			{$Type: 'UI.ReferenceFacet', Label: '{i18n>description}', Target: 'To_Description/@UI.LineItem'},
			{$Type: 'UI.ReferenceFacet', Label: '{i18n>providerInterface}', Target: 'To_API/To_DependentObjectAPI/@UI.LineItem'},
			{$Type: 'UI.ReferenceFacet', Label: '{i18n>provider}', Target: 'To_ProviderApplicationDestination/@UI.LineItem'},
			{$Type: 'UI.ReferenceFacet', Label: '{i18n>consumer}', Target: 'To_ConsumerApplication/@UI.LineItem'},
			{$Type: 'UI.ReferenceFacet', Label: '{i18n>keyMapping}', Target: '@UI.FieldGroup#keyMapping'}
		],

		FilterFacets: [
			{$Type: 'UI.ReferenceFacet', Target: '@UI.FieldGroup#distributionModel'},
			{$Type: 'UI.ReferenceFacet', Target: '@UI.FieldGroup#keyMapping'},
			{$Type: 'UI.ReferenceFacet', Target: '@UI.FieldGroup#adminFilterGroup'}
		],

		FieldGroup#distributionModel: {
			Label: '{i18n>subscriptionDistribution}',
			Data: [
				{$Type: 'UI.DataField', Value: IsActive},
				{$Type: 'UI.DataField', Value: IsLocalModel},
				{$Type: 'UI.DataField', Value: IsMarkedForDeletion},
				{$Type: 'UI.DataField', Value: PackageSize},
				{$Type: 'UI.DataField', Value: Recurrence}
			]
		},

		FieldGroup#adminFilterGroup: {
			Label: '{i18n>admin}',
			Data: [
				{$Type: 'UI.DataField', Value: CreatedByUser},
				{$Type: 'UI.DataField', Value: CreationDate},
				{$Type: 'UI.DataField', Value: LastChangedByUser},
				{$Type: 'UI.DataField', Value: LastChangeDate},
				{$Type: 'UI.DataField', Value: LastActivatedAt},
				{$Type: 'UI.DataField', Value: LastActivatedBy}
			]
		},

		FieldGroup#admin: {
			Label: '{i18n>admin}',
			Data: [
				{$Type: 'UI.DataField', Value: CreatedByUser, Label: '{i18n>createdby}'},
				{$Type: 'UI.DataField', Value: CreationDate, Label: '{i18n>createdon}'},
				{$Type: 'UI.DataField', Value: LastChangedByUser, Label: '{i18n>changedby}'},
				{$Type: 'UI.DataField', Value: LastChangeDate, Label: '{i18n>changedon}'},
				{$Type: 'UI.DataField', Value: LastActivatedAt, Label: '{i18n>lastActivatedOn}'}
			]
		},

		FieldGroup#generalInformation: {
			Label: '{i18n>generalInfo}',
			Data: [
				{$Type: 'UI.DataField', Value: BusinessObjectType_objectTypeCode, Label: '{i18n>objectTypeCode}'}
			]
		},

		FieldGroup#scheduleInformation: {
			Data: [
			]
		},

		FieldGroup#keyMapping: {
			Label: '{i18n>keyMapping}',
			Data: [
				{$Type: 'UI.DataField', Value: KeyMappingDistributionIsAllowed, Label:'{i18n>keyMappingDistributionIsAllowed}', ![@UI.Importance]: #Medium}
			]
		}
	}
);
